#mongoose
- Node.js 환경에서 사용하는 MongoDB 기반 ODM(Object Ddata Modelling) 라이브러리
- 데이터베이스의 Document들을 자바스크립트 객체처럼 사용할 수 있게 한다.
- dotenv : 환경변수들을 파일에 넣고 사용할 수 있게 하는 개발도구
    - 환경변수는 process.env 파일로 조회할 수 있다.
- 설치
    ```s
    $ yarn add mongoose dotenv
    ```
- mongoose에서 데이터베이스를 요청할 때, Promise 기반으로 처리할 수 있다. 이때 어떤 형식의 Promise를 사용할 지 정해야 한다.(Node v7 이후부터는 내장 Promise 를 사용)

## 스키마와 모델
- 스키마 : 컬렉션에 들어가는 문서 내부의 각 필드가 어떤 형식으로 되어 있는지 정의하는 객체
- 모델 : 스키마를 사용해 만드는 인스턴스. 데이터베이스에서 실제 작업을 처리할 수 있는 함수들을 지니고 있는 객체

### 스키마 생성
- mongoose 모듈의 `Schema` 사용
- 문서 내에 들어갈 필드의 이름, 데이터 타입 정보가 들어 있는 객체를 만든다.
- 필드의 기본 값을 설정해주고 싶을 때는 default 를 설정한다.
- 스키마의 기본 지원 타입

    |타입|설명|
    |-----|-----|
    |String|문자열|
    |Number|숫자|
    |Date|날짜|
    |Buffer|파일을 담을 수 있는 버퍼|
    |Boolean|true, false|
    |Mixed(Schema.Types.Mixed)|어떤 데이터도 넣을 수 있는 형식|
    |ObjectId(Schema.Types.ObjectId)|객체 아이디, 주로 다른 객체를 참조할 때 넣는다|
    |Array|배열 형태의 값. []로 감싸서 사용|

### 모델 생성
- mongoose 의 `model(스키마 이름, 스키마 객체)` 함수를 사용
- 스키마 이름을 지정해주면 데이터베이스가 스키마 이름의 복수형태로 컬렉션을 생성
- 세 번째 파라미터로 컬렉션의 이름을 지정해줄 수도 있다.
- 첫 번째 파라미터는 나중에 다른 스키마에서 현재 스키마를 참조해야 하는 상황에서 사용한다.