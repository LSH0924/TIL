# I/O Multiplexing( I/O 다중화)

- poll()、select()、epoll 등의 시스템 콜을 이용해 여러 개의 파일 디스크립터를 하나의 프로세스로 관리하는 것
  - 파일 디스크립터(File Descriptor)
    - 유닉스 시스템에서 프로세스가 파이프, FIFO, 소켓, 터미널, 디바이스, 일반파일 등 종류에 상관없이 모든 열려있는 파일을 참조할 때 사용
    - 시스템으로부터 할당 받은 파일을 대표하는 0이 아닌 정수 값
    - 프로세스에서 열린 파일의 목록을 관리하는 테이블의 인덱스
    - 0 : 표준 입력(Standard Input), 1 : 표준 출력(Standard Output), 2 : 표준 에러(Standard Error)

## select

- 계산량 : O(n)
- 사용이 쉽고, 지원하는 OS가 많아 이식성이 좋다.
- 감시대상인 파일 디스크립터 N개를 루프 안에서 하나씩 상태를 확인한다.
- 파일 디스크립터를 하나하나 확인하기 때문에, 대상의 수가 증가하면 퍼포먼스가 떨어진다.
- 관리할 수 있는 수가 한정되어 있기 때문에 그 수를 초과하면 사용할 수 없다.

## poll

- select와 거의 동일
- low level의 처리를 하기 때문에 시스템 콜을 하는 횟수가 적다. 이식성이 나쁨
- 접속수가 늘어나면 오히려 fd당 체크 마스크의 크기가 select는 3bit인데 비해, poll은 64bit정도이므로 양이 많아지면 성능이 select보다 떨어짐.

## epoll

- 계산량 : O(1)
- Linux 2.5.44 버전부터 도입됨
- 관리할 수 있는 파일 디스크립터의 수에 제한이 없다.
- 파일 디스크립터의 상태 변화 감시 기능개선 : 파일 디스크립터의 상태를 커널에서 관리
- 커널이 파일 디스크립터를 관리하기 때문에, 커널과 유저스페이스 사이의 통신 오버헤드가 대폭 줄어 퍼포먼스가 좋다.

---

- https://dev-ahn.tistory.com/96 [Developer Ahn]
- https://blog.takanabe.tokyo/2015/03/26/240/ [ノンブロッキング I/O と非同期 I/O の違いを理解する]
- http://www.mimul.com/pebble/default/2012/03/21/1332303327316.html [I/O Multiplexing(select, poll, epoll, kqueue)]
