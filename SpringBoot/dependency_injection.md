# Dependency Injection(DI)

- Field Injection(필드 주입)

  - 장점 : 코드량이 줄어든다.( boilerplate 제거)
  - 단점
    - DI컨테이너와의 결합도가 높아져 외부에서 사용하기 어려워진다.
      - DI 프레임워크는 관리되는 클래스가 DI컨테이너에 의존하지 않아야 한다.
      - 즉, DI컨테이너를 실행하지 않고 유닛테스트에서 별도로 클래스를 인스턴스화 시킨 후 테스트 할 수 있어야 한다.
      - Field Injection(필드 주입) 에서는 스프링 설정 파일을 모두 읽고, 모든 Bean이 설정되어야만 테스트를 진행할 수 있음.
    - 의존관계가 보이지 않는다.
      - DI컨테이너가 각 클래스의 종속성을 관리하기 때문에, 클래스의 의존관계를 명확하게 알 수 없다.
      - 무분별하게 서비스를 이용해버리기 쉽기 때문에 클래스가 너무 커져버릴 가능성이 있다.
      - 필수, 불변적 프로퍼티 DI라면 Constructor Injection(생성자 주입)을 추천한다.
      - 가변, 선택적 프로퍼티 DI라면 Setter Injection(변경자 주입)을 추천한다.
      - 위의 두 가지 방법을 이용하는게 보다 정확하게 의존관계를 설명할 수 있다.

- Constructor Injection(생성자 주입)
  - 필수, 불변 프로퍼티를 주입할 때 사용한다.
  - 장점
    - 필수 의존성을 명확하게 해준다.
    - 클래스가 커질 경우, 코드 형태만으로 문제가 있음을 알 수 있다.
      <br> 생성자가 더러워질 경우, SOLID 중 SRP(단일 책임 원칙)에 어긋나기 때문에 리팩토링이 필요한 시점을 알 수 있다.
    - 스프링 테스트 라이브러리를 사용하지 않고도 테스트를 진행할 수 있다.
    - v4.3 이상부터는 `@Autowired` 어노테이션 또한 생략할 수 있다. POJO답게 사용할 수 있음.
  - 단점
    - 선택적으로 프로퍼티를 주입하기 어렵다.
    - 필수로 DI되어야 할 항목을 빼먹을 수 있다.
    - 오브젝트를 먼저 만들고 나서 설정값을 넣을 수 없다. : Setter Injection(변경자 주입) 추천
- Setter Injection(변경자 주입)
  - 가변, 선택적 프로퍼티를 주입할 때 사용한다.
